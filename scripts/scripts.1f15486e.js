"use strict";angular.module("documentsApp",["ngMessages","ngRoute","ngSanitize","ngMap"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/top10",{templateUrl:"views/top10.html",controller:"Top10Ctrl",controllerAs:"top10"}).otherwise({redirectTo:"/"})}]),angular.module("documentsApp").controller("MainCtrl",["earthQuakesService","NgMap","$compile",function(a,b,c){function d(){f()}var e=this;e.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"],e.cityToSearch="Mexico City",e.template={cached:"custom-cached-info-window-template.html",external:"app/views/_infoWindow.html"};var f=function(){a.getcityCoordinatesByName(e.cityToSearch).then(function(a){e.city=a.data.geonames[0],b.getMap().then(function(a){e.map=a,google.maps.event.addListenerOnce(a,"bounds_changed",function(){g(e.map.getBounds())})})})},g=function(b){a.getEarthQuakesbyCoordinates(b.f.f,b.f.b,b.b.f,b.b.b).then(function(a){e.earthquakes=a.data.earthquakes,console.log(e.earthquakes)})};e.showEarthQuake=function(a,b){e.eq=e.earthquakes[b],e.map.showInfoWindow("cached",this)},e.mapCity=f,d()}]),angular.module("documentsApp").controller("Top10Ctrl",["earthQuakesService",function(a){var b=this;a.getEarthQuakesbyCoordinates(90,-90,180,-180).then(function(a){b.earthquakes=a.data.earthquakes,console.log(b.earthquakes)})}]),angular.module("documentsApp").service("earthQuakesService",["$http",function(a){function b(b){return a({method:"GET",url:"http://api.geonames.org/searchJSON?q="+b+"&maxRows=1&username=mxalfrod"})}function c(b,c,d,e){return a({method:"GET",url:"http://api.geonames.org/earthquakesJSON?north="+b+"&south="+c+"&east="+d+"&west="+e+"&username=mxalfrod"})}return{getcityCoordinatesByName:b,getEarthQuakesbyCoordinates:c}}]),angular.module("documentsApp").run(["$templateCache",function(a){a.put("views/_infoWindow.html",'<div ng-non-bindable=""> I\'m an cached template<br> Lat: {{anchor.getPosition().lat()}}<br> Lng: {{anchor.getPosition().lng()}}<br> Magnitude:{{item.magnitude}}<br> Latitude:{{item.lat}}<br> Longitude:{{item.lng}}<br> Depth:{{item.depth}}<br> Date:{{item.datetime}}<br> </div>'),a.put("views/main.html",'<div class="jumbotron"> <h1>Earthquakes by city</h1> <input type="text" ng-model="main.cityToSearch"> <p><a class="btn btn-lg btn-success" ng-click="main.mapCity();">Map It!<span class="glyphicon glyphicon-ok"></span></a></p> </div> <script id="custom-cached-info-window-template.html" type="text/ng-template"><div ng-non-bindable="">\n    Earthquake Information<br/>\n    Lat: {{anchor.getPosition().lat()}}<br/>\n    Lng: {{anchor.getPosition().lng()}}<br>\n\n    Magnitude:{{main.eq.magnitude}}<br/>\n    Latitude:{{main.eq.lat}}<br/>\n    Longitude:{{main.eq.lng}}<br/>\n    Depth:{{main.eq.depth}}<br/>\n    Date:{{main.eq.datetime}}<br/>\n  </div></script> <ng-map center="{{main.city.lat}},{{main.city.lng}}" zoom="9"> <info-window id="cached" template="{{main.template.cached}}"></info-window> <marker id="marker{{quake.eqid}}" position="[{{quake.lat}},{{quake.lng}}]" ng-repeat="(id,quake) in main.earthquakes" on-click="main.showEarthQuake(event,id)"></marker> </ng-map>'),a.put("views/top10.html",'<p>This is the top10.</p> <table class="table table-bordered"> <tr> <th>Date</th> <th>Depth</th> <th>Latitude</th> <th>Longitude</th> <th>Magnitude</th> </tr> <tr ng-repeat="quake in top10.earthquakes"> <td>{{quake.datetime}}</td> <td>{{quake.depth}}</td> <td>{{quake.lat}}</td> <td>{{quake.lng}}</td> <td>{{quake.magnitude}}</td> </tr> </table>')}]);